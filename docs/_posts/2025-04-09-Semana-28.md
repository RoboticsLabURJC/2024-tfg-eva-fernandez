---
title: "Semana 28. Creando la librería GreenNaoLib"
categories:
  - Weblog
tags:
  - Python
  - Librería
  - Nodo
---

Las tareas de esta semana eran bastantes y muy variadas:
* Eliminar las ondas del editor ya que eran inútiles
* Ver los límites de la velocidad lineal de NAO, para poner un valor mínimo y un máximo
* Hacer que NAO andase a más distancia
* Medir cuantitativamente las desviaciones a la hora de caminar
* Convertir mi nodo ros en una librería para python
* Leer un par de papers que me envió mi tutor
* Hacer andar a NAO en arco, sin tener en cuenta ningún tipo de parametrización
* Una vez hecho lo anterior, parametrizar V y W

# Eliminar las ondas del editor

Esto no supuso ningún esfuerzo o dificultad, ya que solo era eliminar las partes del código relacionadas con las ondas. Una vez hecho éstas no aparecían al abrir el editor, ni al guardar los jsons.

# Hacer que NAO ande a más distancia

Para esto simplemente hice que la secuencia de movimeinto se repitiese 3 veces, con un bucle for

# Medir cuantitativamente las desviaciones a la hora de caminar

Para esta tarea, una vez nao caminando más distancia, lo puse a caminar a dstintas velocidades y comparé su posición incial y su posición final:

## Velocidad 0.5
### Posición incial

![antes_05](/2024-tfg-eva-fernandez/images/semana-28/antes_de_andar_v05.png)

### Posición final

![despues_05](/2024-tfg-eva-fernandez/images/semana-28/despues_de_andar_v05.png)

## Velocidad 1
### Posición incial

![antes_1](/2024-tfg-eva-fernandez/images/semana-28/antes_de_andar_v1.png)

### Posición final

![despues_1](/2024-tfg-eva-fernandez/images/semana-28/despues_de_andar_v1.png)

## Velocidad 2

### Posición incial

![antes_2](/2024-tfg-eva-fernandez/images/semana-28/antes_de_andar_v2.png)

### Posición final

![despues_2](/2024-tfg-eva-fernandez/images/semana-28/despues_de_andar_v2.png)

# Dar un mínimo y un máximo a la velocidad lineal de NAO

Para esto estuve probando valores hasta ver que o bien no se podía bajar más (mínimo), o bien no se podía subir más (máximo). Con lo que llegué a la conclusión de que la velocidad mínima sería de 0.35:

<video width="800" controls>
  <source src="/2024-tfg-eva-fernandez/images/semana-28/minimo.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

Y la máxima de 4.35:

<video width="800" controls>
  <source src="/2024-tfg-eva-fernandez/images/semana-28/maximo.webm" type="video/webm">
  Your browser does not support the video tag.
</video>


Como se puede ver, aún resbala, pero eso lo investigaré más adelante.

# Convertir el nodo ROS2 en una libreía para python

De esta tarea me sorprendió su sencillez, ya que creía que iba a ser muy complicada porque un nodo ROS2, aunque esté en python, se ejecuta de manera distinta que un programa normal de python (ros2 run package node vs. python3 programa.py). Sin embargo, el proceso fue de lo más sencillo. Ya que simplemente debía eliminar el main de mis nodos, y añadir rclpy.init() al principio, después, sólo era importar y llamar a las diferentes clases del nodo en un programa python normal y corriente:


```python
import GreenNaoLib

node = GreenNaoLib.SetV(1.5)
node = GreenNaoLib.Interpreter("say_hi_L.json")
```

Después, sin ser necesario compilar con colcon, ni hacer source, simplemente lo lanzamos con python3, después de lanzar con ROS2 la simulación:

<video width="800" controls>
  <source src="/2024-tfg-eva-fernandez/images/semana-28/librería_completada.webm" type="video/webm">
  Your browser does not support the video tag.
</video>

Como se puede ver, ahora podemos lanzar tanto el modo de caminar como el intérprete de movimientos muy cómodamente.

# Mover a NAO en arco fijo
## Mover a NAO en arco parametrizable con V y W
# Leer papers